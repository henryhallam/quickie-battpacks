EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:stm32
LIBS:pkl_conn
LIBS:pkl_device
LIBS:pkl_ftdi
LIBS:pkl_logos
LIBS:pkl_misc
LIBS:pkl_molex
LIBS:pkl_power
LIBS:pkl_sensor
LIBS:pkl_tag_connect
LIBS:pkl_texas
LIBS:bms
LIBS:bms-head-misc
LIBS:sictroller
LIBS:bms-head-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 11
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 3375 2725 2725 2525
U 584338B1
F0 "MCU" 60
F1 "mcu.sch" 60
F2 "VDIV_PREFUSE_1" I L 3375 3800 60 
F3 "VDIV_PREFUSE_2" I L 3375 3900 60 
F4 "VDIV_PREFUSE_3" I L 3375 4000 60 
F5 "VDIV_PREFUSE_4" I L 3375 4100 60 
F6 "VDIV_BAT" I L 3375 4200 60 
F7 "VDIV_LOAD1" I L 3375 4300 60 
F8 "VDIV_LOAD2" I L 3375 4400 60 
F9 "I_BAT" I L 3375 4800 60 
F10 "I_LOAD1" I L 3375 4900 60 
F11 "I_LOAD2" I L 3375 5000 60 
F12 "MOSI" O R 6100 4800 60 
F13 "MISO" I R 6100 4900 60 
F14 "~CS" O R 6100 5100 60 
F15 "SCLK" O R 6100 5000 60 
F16 "CAN_TX" O R 6100 4225 60 
F17 "CAN_RX" I R 6100 4325 60 
F18 "PRECHG1_EN" O R 6100 2825 60 
F19 "PRECHG2_EN" O R 6100 2925 60 
F20 "CONTACTOR1_EN" O R 6100 3075 60 
F21 "CONTACTOR2_EN" O R 6100 3175 60 
F22 "PANEL_LED_R~G" O R 6100 3575 60 
F23 "PANEL_LED_G~R" O R 6100 3675 60 
F24 "12V_EN" O L 3375 2875 60 
F25 "5V_SNOOZE" O L 3375 2975 60 
$EndSheet
$Sheet
S 6825 2100 875  300 
U 58AB7240
F0 "Precharge 1" 60
F1 "precharge.sch" 60
F2 "HV_IN" I L 6825 2175 60 
F3 "HV_OUT" O R 7700 2175 60 
F4 "EN" I L 6825 2325 60 
$EndSheet
$Sheet
S 6275 4100 900  350 
U 58AB7286
F0 "IsoCAN" 60
F1 "IsoCAN.sch" 60
F2 "TX" I L 6275 4225 60 
F3 "RX" O L 6275 4325 60 
F4 "CAN+" B R 7175 4175 60 
F5 "CAN-" B R 7175 4275 60 
F6 "CAN_GND" U R 7175 4375 60 
$EndSheet
$Sheet
S 6275 4725 900  450 
U 58AB7292
F0 "IsoSPI" 60
F1 "IsoSPI.sch" 60
F2 "MOSI" I L 6275 4800 60 
F3 "MISO" O L 6275 4900 60 
F4 "SCLK" I L 6275 5000 60 
F5 "~CS" I L 6275 5100 60 
F6 "IsoSPI+" B R 7175 4875 60 
F7 "IsoSPI-" B R 7175 4975 60 
$EndSheet
$Sheet
S 2225 3725 850  750 
U 58ABFC75
F0 "HV sensing" 60
F1 "hv_sense.sch" 60
F2 "HV1" I L 2225 3800 60 
F3 "HV2" I L 2225 3900 60 
F4 "HV3" I L 2225 4000 60 
F5 "HV4" I L 2225 4100 60 
F6 "HV5" I L 2225 4200 60 
F7 "HV6" I L 2225 4300 60 
F8 "HV7" I L 2225 4400 60 
F9 "LV1" O R 3075 3800 60 
F10 "LV2" O R 3075 3900 60 
F11 "LV3" O R 3075 4000 60 
F12 "LV4" O R 3075 4100 60 
F13 "LV5" O R 3075 4200 60 
F14 "LV6" O R 3075 4300 60 
F15 "LV7" O R 3075 4400 60 
$EndSheet
$Sheet
S 6825 2575 875  300 
U 58AC7517
F0 "Precharge 2" 60
F1 "precharge.sch" 60
F2 "HV_IN" I L 6825 2650 60 
F3 "HV_OUT" O R 7700 2650 60 
F4 "EN" I L 6825 2800 60 
$EndSheet
$Sheet
S 1925 2325 1150 900 
U 58AC8389
F0 "Power supplies" 60
F1 "psus.sch" 60
F2 "HV_IN" I R 3075 2400 60 
F3 "+12VA" O L 1925 2400 60 
F4 "+16V" O L 1925 2750 60 
F5 "+3.3VA" O L 1925 3150 60 
F6 "-12VA" O L 1925 2500 60 
F7 "+5V" O L 1925 2600 60 
F8 "+3.3V" O L 1925 3050 60 
F9 "12V_EN" I R 3075 2875 60 
F10 "5V_SNOOZE" I R 3075 2975 60 
$EndSheet
$Sheet
S 2025 4725 1050 350 
U 58AD071B
F0 "Current sensing" 60
F1 "i_sense.sch" 60
F2 "I_BAT" O R 3075 4800 60 
F3 "I_LOAD1" O R 3075 4900 60 
F4 "I_LOAD2" O R 3075 5000 60 
$EndSheet
$Sheet
S 8600 2100 850  250 
U 58AD4DA7
F0 "Contactor 1" 60
F1 "contactor.sch" 60
F2 "COIL+" O R 9450 2175 60 
F3 "COIL-" O R 9450 2275 60 
F4 "EN" I L 8600 2275 60 
$EndSheet
$Sheet
S 8600 2600 850  250 
U 58AD64B2
F0 "Contactor 2" 60
F1 "contactor.sch" 60
F2 "COIL+" O R 9450 2675 60 
F3 "COIL-" O R 9450 2775 60 
F4 "EN" I L 8600 2775 60 
$EndSheet
Wire Wire Line
	6275 4800 6100 4800
Wire Wire Line
	6100 4900 6275 4900
Wire Wire Line
	6275 5000 6100 5000
Wire Wire Line
	6100 5100 6275 5100
$Comp
L CONN_01X02 P?
U 1 1 58B20FAD
P 7600 4925
F 0 "P?" H 7600 5075 50  0000 C CNN
F 1 "CONN_01X02" V 7700 4925 50  0000 C CNN
F 2 "" H 7600 4925 50  0000 C CNN
F 3 "" H 7600 4925 50  0000 C CNN
	1    7600 4925
	1    0    0    -1  
$EndComp
Wire Wire Line
	7400 4875 7175 4875
Wire Wire Line
	7175 4975 7400 4975
$Comp
L CONN_01X03 J?
U 1 1 58B27582
P 7600 4275
F 0 "J?" H 7600 4475 50  0000 C CNN
F 1 "CONN_01X03" V 7700 4275 50  0000 C CNN
F 2 "Connectors_Molex:Molex_PicoBlade_53261-0371" H 7600 4275 50  0001 C CNN
F 3 "" H 7600 4275 50  0000 C CNN
	1    7600 4275
	1    0    0    1   
$EndComp
Wire Wire Line
	7400 4175 7175 4175
Wire Wire Line
	7400 4275 7175 4275
Wire Wire Line
	7175 4375 7400 4375
Wire Wire Line
	6825 2325 6525 2325
Wire Wire Line
	6525 2325 6525 2825
Wire Wire Line
	6525 2825 6100 2825
Wire Wire Line
	6100 2925 6725 2925
Wire Wire Line
	6725 2925 6725 2800
Wire Wire Line
	6725 2800 6825 2800
Wire Wire Line
	6100 3175 8450 3175
Wire Wire Line
	8350 3075 6100 3075
Wire Wire Line
	6275 4325 6100 4325
Wire Wire Line
	6100 4225 6275 4225
Wire Wire Line
	6825 2650 6725 2650
Wire Wire Line
	6725 2650 6725 2175
Wire Wire Line
	3200 2175 6825 2175
Wire Wire Line
	3375 2975 3075 2975
Wire Wire Line
	3075 2875 3375 2875
Wire Wire Line
	3200 2175 3200 2400
Wire Wire Line
	3200 2400 3075 2400
Connection ~ 6725 2175
Wire Wire Line
	8350 2275 8350 3075
Wire Wire Line
	8350 2275 8600 2275
Wire Wire Line
	8450 3175 8450 2775
Wire Wire Line
	8450 2775 8600 2775
Wire Wire Line
	3075 3800 3375 3800
Wire Wire Line
	3375 3900 3075 3900
Wire Wire Line
	3075 4000 3375 4000
Wire Wire Line
	3375 4100 3075 4100
Wire Wire Line
	3075 4200 3375 4200
Wire Wire Line
	3375 4300 3075 4300
Wire Wire Line
	3075 4400 3375 4400
Wire Wire Line
	3375 4800 3075 4800
Wire Wire Line
	3075 4900 3375 4900
Wire Wire Line
	3375 5000 3075 5000
Text Notes 1425 800  0    60   ~ 0
TODO:\n - Connectors\n - Sub-sheet todos
Text Notes 6725 1375 2    60   ~ 0
Single connector for HV sense, ground and contactor coils.  Molex nano-fit (2.5mm, 300V) or micro-fit (3mm, 600V)
Text Notes 8900 3875 2    60   ~ 0
Combine CAN with panel LEDs on one connector -\nalso maybe contactor coils due to panel override?
$EndSCHEMATC
